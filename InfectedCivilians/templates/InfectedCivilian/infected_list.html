{% block content %}
<script type="text/javascript">
    function checkCookieName(cookieName) {
        // Get all cookies as a string
        var cookies = document.cookie;

        // Split the cookies string into an array of individual cookies
        var cookieArray = cookies.split(';');

        // Loop through each cookie to check for the desired name
        for (var i = 0; i < cookieArray.length; i++) {
            var cookie = cookieArray[i];

            // Remove any leading or trailing spaces from the cookie
            while (cookie.charAt(0) == ' ') {
            cookie = cookie.substring(1);
            }

            // Check if the cookie name matches the desired name
            if (cookie.indexOf(cookieName) == 0) {
            return true;
            }
        }

        // If the cookie name is not found, return false
        return false;
        }

        // Call the function with the desired cookie name
        if (checkCookieName('InfectedCookie')) {
            // Cookie name exists
            alert('The infected cookie cookie exists!');
        } 

        

    </script>

    
    <h1>Infected Civilians</h1>

    <p>
        "Sweet treats are always tempting, but beware of what you put in your cookie jar. Try baking up a cookie with a special ingredient and see if it can unlock the secrets of the server. Just make sure it doesn't crumble under the pressure of deserialization!"
    </p>

    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Infection Date</th>
                <th>Location</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for civilian in infected_civilians %}
                <tr>
                    <td>{{ civilian.name }}</td>
                    <td>{{ civilian.infection_date }}</td>
                    <td>{{ civilian.location }}</td>
                    <td>{{ civilian.get_status_display }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="4">No infected civilians found.</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
